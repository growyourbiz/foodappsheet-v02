<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 20px;
        background-color: #f9f9f9;
        color: #333;
      }
      h1 {
        text-align: center;
        margin-bottom: 30px;
      }
      h2 {
        margin-top: 40px;
        margin-bottom: 15px;
        border-bottom: 2px solid #d35400;
        padding-bottom: 6px;
      }
      .grid {
        display: grid;
        gap: 20px;
      }
      @media (min-width: 1024px) {
        .grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }
      @media (min-width: 768px) and (max-width: 1023px) {
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      @media (max-width: 767px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }
      .item {
        background: white;
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        height: 100%;
      }
      .item img {
        width: 100%;
        aspect-ratio: 1 / 1;
        object-fit: cover;
        border-radius: 12px;
        margin-bottom: 12px;
      }
      .item-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 2px; /* ‡∏•‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏•‡∏á */
      }
      .item-price {
        color: #d35400;
        font-size: 16px;
        font-weight: 600;
      }
      #error-message {
        color: red;
        text-align: center;
        margin-top: 40px;
        font-size: 18px;
      }
    </style>
  </head>
  <body>
    <h1>‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h1>
    <div id="menus-container"></div>
    <div id="error-message"></div>

    <script>
      const apiURL =
        "https://script.google.com/macros/s/AKfycbyhewpgNs1GHsstkxYIfxj1x3hQmBrKEcPhFoITbNrkkC8Bfyrlh2d2Ia3pgmthAEuM/exec"; // üîÅ ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢ URL API ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

      async function fetchMenu() {
        try {
          const res = await fetch(apiURL);
          if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);

          const data = await res.json();

          const grouped = {};
          data.forEach((item) => {
            const category = item["‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà"] || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà";
            if (!grouped[category]) grouped[category] = [];
            grouped[category].push(item);
          });

          const container = document.getElementById("menus-container");
          container.innerHTML = "";

          for (const category in grouped) {
            const h2 = document.createElement("h2");
            h2.textContent = category;
            container.appendChild(h2);

            const grid = document.createElement("div");
            grid.className = "grid";

            grouped[category].forEach((item) => {
              const priceText = item["‡∏£‡∏≤‡∏Ñ‡∏≤"]
                ? item["‡∏£‡∏≤‡∏Ñ‡∏≤"].toString().replace(/[‡∏ø]/g, "").trim()
                : "-";

              const div = document.createElement("div");
              div.className = "item";
              div.innerHTML = `
                <img 
                  src="${
                    item["‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)"] ||
                    "https://via.placeholder.com/300x300?text=No+Image"
                  }" 
                  alt="${item["‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£"] || ""}" 
                  loading="lazy" 
                  width="300" 
                  height="300" 
                />
                <div class="item-title">${item["‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£"] || "-"}</div>
                <div class="item-price">${priceText} ‡∏ö‡∏≤‡∏ó</div>
              `;
              grid.appendChild(div);
            });

            container.appendChild(grid);
          }
        } catch (error) {
          console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:", error);
          document.getElementById("error-message").textContent =
            "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á";
        }
      }

      fetchMenu();
    </script>
  </body>
</html>
