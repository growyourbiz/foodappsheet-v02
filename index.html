<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>เมนูอาหาร</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 20px;
        background-color: #f9f9f9;
        color: #333;
      }
      h2 {
        margin-top: 40px;
        margin-bottom: 10px;
      }
      .grid {
        display: grid;
        gap: 20px;
      }
      @media (min-width: 1024px) {
        .grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }
      @media (min-width: 768px) and (max-width: 1023px) {
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      @media (max-width: 767px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }
      .item {
        background: white;
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }
      .item img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 12px;
        margin-bottom: 8px;
      }
      .item-title {
        font-size: 18px;
        font-weight: bold;
      }
      .item-price {
        color: #d35400;
        margin-top: 4px;
        font-size: 16px;
      }
    </style>
  </head>
  <body>
    <h1>เมนูอาหาร</h1>
    <div id="menus-container"></div>

    <script>
      // แทน YOUR_API_URL ด้วย URL Google Apps Script API ของคุณ
      const apiURL =
        "https://script.google.com/macros/s/AKfycbwi_SJOZ0OTpjR3AMARvY96WxdTBQ2YD7LoO2QUJo0peXRTHypILqAGNAaSHG-pCy3f/exec";

      async function fetchMenu() {
        try {
          const res = await fetch(apiURL);
          const data = await res.json();

          // แยกข้อมูลตามหมวดหมู่
          const grouped = {};
          data.forEach((item) => {
            const category = item["หมวดหมู่"] || "ไม่มีหมวดหมู่";
            if (!grouped[category]) grouped[category] = [];
            grouped[category].push(item);
          });

          const container = document.getElementById("menus-container");
          container.innerHTML = "";

          // สร้างส่วนของแต่ละหมวดหมู่
          for (const category in grouped) {
            const h2 = document.createElement("h2");
            h2.textContent = category;
            container.appendChild(h2);

            const grid = document.createElement("div");
            grid.className = "grid";

            grouped[category].forEach((item) => {
              // ลบสัญลักษณ์ ฿ ออกถ้ามี
              const priceText = item["ราคา"]
                ? item["ราคา"].replace(/[฿]/g, "").trim()
                : "";

              const div = document.createElement("div");
              div.className = "item";
              div.innerHTML = `
              <img src="${item["รูปภาพ"]}" alt="${item["ชื่อรายการ"] || ""}" />
              <div class="item-title">${item["ชื่อรายการ"] || "-"}</div>
              <div class="item-price">${priceText} บาท</div>
            `;
              grid.appendChild(div);
            });

            container.appendChild(grid);
          }
        } catch (error) {
          console.error("โหลดเมนูอาหารไม่สำเร็จ:", error);
          document.getElementById("menus-container").textContent =
            "ไม่สามารถโหลดข้อมูลเมนูอาหารได้";
        }
      }

      fetchMenu();
    </script>
  </body>
</html>
